@inherits Umbraco.Web.Mvc.UmbracoTemplatePage
@{
    Layout = "umbLayout.cshtml";
}

@foreach (var role in Model.Content.Children.GroupBy(x => x.GetPropertyValue<int>("role")))
{
    <div>
        <h2>@umbraco.library.GetPreValueAsString(role.Key)</h2>

        @foreach (var person in role)
        {
            <h3>@(person.GetPropertyValue<string>("name"))</h3>
            if (person.HasValue("image"))
            {
                <img src="@Umbraco.TypedMedia(int.Parse(person.GetPropertyValue<string>("image"))).Url" />
            }
            <p>@(person.GetPropertyValue<string>("description"))</p>
        }
    </div>
}